---
title: "Dynamics of Global and Local Social Influence"
author: "Nicolas Restrepo & Thomas Wolff"
date: '`r format(Sys.time(), "%d %B, %Y")`'
fontsize: 12pt
output:
  pdf_document: default
  html_document: default
header-includes:
  - \usepackage{setspace}
  - \doublespacing
  - \usepackage{lineno}
  - \linenumbers
  - \def\linenumberfont{\normalfont\tiny\sffamily}
bibliography: gli.bib
abstract: "When learning from one another, individuals use different strategies and heuristics. In this paper we argue that the social learning strategies agents use are important for understanding processes of cultural transmission. Even though research on social learning and social networks has increasingly considered different sources of social influence, many models of cultural transmission still tend to assume agents that learn from their peers in a single way. Here, we incorporate current knowledge about social learning into models of cultural transmission and assess its implications. We argue that classic formulations of social influence can be extended to incorporate different social learning heuristics. Then, using longitudinal network data, we show that there is evidence that agents place varying weight on different sources of social information, depending on the phenomenon at hand. We then build an agent-based simulation that incorporates the idea that individuals use different social learning strategies when deciding their lines of action. Our model is capable of replicating interesting findings, including the idea that sub-populations can emerge even in fully connected structures. The key is that we can arrive at that insight only by manipulating the weight that agents place on the different sources of social influence."
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = F, message=F, warning=FALSE)
```

```{r}
library(tidyverse)
library(igraph)
library(brms)
library(patchwork)
library(panelr)
library(igraph)
library(ggraph)
library(tidygraph)
theme_set(theme_classic())
```

## Introduction 

Individuals are adept social learners. When trying to infer the most appropriate line of action, they might use a combination of social learning strategies to extract relevant information from those around them. Our understanding of social influence, then, has to account for the fact that agents use sophisticated heuristics when they learn from one another. Accordingly, in this paper we offer a straightforward argument: that different social phenomena imply particular social learning strategies and this, in turn, affects how they spread throughout a network. Here we focus on three strategies: relying on one's individual experience, paying attention to one's immediate ties - local influence -, and observing the most central ties of the network - global influence. We show that global and local measures are differentially informative across different behaviors. We extend this idea using a simulation, exploring how trajectories of cultural transmission vary when agents use different social learning techniques. Our key finding is that the emergence of distinct sub-groups, even in fully connected networks, can be explained by the weight agents place on the information they retrieved using different strategies. Thus, we arrive at a result that has come to be a mark of plausible models of cultural transmission [@axelrodDisseminationCultureModel1997] by examining the interplay between social learning heuristics. 

This paper has the following structure. First, we provide an overview of the theoretical issues that motivate this analysis. Second, we use the longitudinal network data-set of adolescent behavior collected by Knecht et al. [-@knechtNetworkActorAttributes2012] to suggest that measures of global and local influence might be differentially informative across different behaviors. Third, we build an agent-based model where actors use different combinations of strategies to learn from one another. The results show that different social learning strategies lead to varying diffusion trajectories. We close by discussing the implications of these findings for the study of cultural transmission.

## Background 

### Simulating cultural transmission and segmentation

In recent years, sociologists have used agent-based modeling to improve theories of cultural transmission between individuals. These improvements have distinguished themselves from earlier models by focusing less on the diffusion of public and material forms of culture and more on how cognitive and intrapsychic forms of culture — what Lizardo [-@lizardoImprovingCulturalAnalysis2017] has termed "personal" culture — spread through social networks. Further, this new focus has itself shifted over the last decade, as models in this vein have moved from an initial concern with explicitly articulated "declarative" beliefs [@dellapostaWhyLiberalsDrink2015] toward "nondeclarative" forms of culture, including implicit associations and social norms [@goldbergSocialContagionAssociative2018; @shawMechanicsDynamicsSocial2015; @shawSomethingOutNothing2020]. The results of this shift have been both generative and powerful, not only for explaining how actors acquire culture from others but also for how culture as shared cognitive representations [@dimaggioCultureCognition1997; @ceruloMiningIntersectionsCognitive2010] arises in the first place. Shaw [-@shawMechanicsDynamicsSocial2015], for example, presents a model in which agents in a network deploy "representations" of phenomena and observe representations deployed by their neighbors, updating their likelihood of using specific representations between iterations. As agents update which representations they use over time, group-level consensus arises around which representations should be deployed, and this consensus reinforces the use of specific representations once established. The end result is a parsimonous and empirical model of social construction in groups illustrating how individual behavior aggregates into shared culture. Moreover, Shaw finds consensus around representations in her model is rarely global: more often than not, individual representations come to prevail within specific subgroups in a network.

Since Axelrod's [-@axelrodDisseminationCultureModel1997] seminal paper, simulations of cultural transmission have sought to recreate the emergence of subgroups enacting different cultural items. This remains a  prominent feature of newer models. As Goldberg and Stein (2018:900) have argued, a common shortcoming of "contagion" models of diffusion is their implication that fully connected networks will ultimately always reach a point of full convergence, as all actors within the networks adopt and enact the same cultural item. Compared to earlier contagion models, recent simulations have prioritized the role of simple practices and heuristics in how actors process information. As individual actors use these practices and heuristics over time, they come to differ in their adoption of cultural items, culminating in segmented networks resembling those seen in the real world. Deffuant [-@deffuantMixingBeliefsInteracting2000] shows that polarization arises in contexts with no structural barriers when agents show preferences toward particular kinds of information or prefer to learn from certain types of actors. Similarly, Smaldino [-@smaldinoAdoptionSocialMarker2017] finds segmentation in networks where actors favor information coming from others with similar identities as themselves. Elsewhere, Goldberg and Stein [-@goldbergSocialContagionAssociative2018] show polarization arising when agents build associations between cultural items and use these associations to judge the same pieces of new information differently. The ability of recent simulation work to show the emergence of network polarization has vital implications for substantive work on culture and groups, as well as for broader studies of cultural diffusion. Notably, the notion that fully connected networks will always reach convergence proves false once heuristics and other practices come into account.

Recent advances in simulating cultural transmission do well to show how cultural transmission aggregates into network-wide segmentation. Nonetheless, we contend that this process can be explained using even more parsimonious models, and that doing so may be advantageous over existing alternatives. An exemplar of recent work in this area, Goldberg and Stein's [@goldbergSocialContagionAssociative2018] "associative diffusion" model features agents enacting and observing intrinsically independent pairs of cultural items. Agents form conceptual links between these pairs using a basic heuristic and modify their probability of enacting certain pairs accordingly. Over time, agents come to repeatedly enact specific pairs of items such that network-wide polarization appears. The process described here is relatively simple, and Goldberg and Stein rightfully draw from research on cognition to argue that actors form associations between concepts. At the same time, the authors assume a model of human cognition in which individual minds house networks of links between concepts, which can quickly grow complex the more cultural items they include. Research on cognition also reveals that humans are  limited in their ability to process large amounts of information. When scholars treat cultural systems as intrapsychic "webs of meaning," they risk creating networks that are too elaborate for the human mind to handle [@martinLifeBeachYou2010]. Conceptual links are undoubtedly a key part of cultural transmission, and Goldberg and Stein's model has rightfully had an important impact in this line of work. What we argue here is that it is possible to arrive at a similar finding without stepping into the cultural associations that live within agents' heads. If simpler processes produce results similar to those seen in recent work, we find ourselves with a compelling alternative to explaining how culture moves through networks and creates segmented groups.

Despite our argument that cultural transmission and polarization can be explained using simpler heuristics than recent work has offered, this work still succeeds in showing the power of relatively simple mechanisms. Yet current models of cultural transmission may be too narrow in how they conceptualize and model social learning, particularly in their tendency to deploy individual mechanisms in isolation. For the most part, these models do not incorporate multiple learning heuristics simultaneously, nor do they explore how the weights individuals place on different sources of information may shape how behaviors and ideas spread across networks. Individuals are adept social learners, and can use a combination of social learning strategies to extract relevant information from those around them when trying to infer the most appropriate line of action. Our understanding of social influence should account for the fact that actors use sophisticated combinations of simple heuristics when they learn from one another. In what follows, we argue that different social phenomena imply particular social learning strategies, and that this in turn affects how they spread throughout a network. Moreover, we argue that actors combine and weigh heuristics differently across different behaviors. Here we focus on three strategies and their combinations: relying on one's individual experience, paying attention to the behavior of one's immediate ties (local influence), and observing the behavior of the most central ties of the network (global influence).

### Individual, Local, and Global Influence in Social Settings

Research on learning trajectories in both humans and non-human animals shows the creation of preferences and habits through individual exploration. At the same time, situations arise in which learning through individual exploration is costly or intractable, prompting agents to rely on social cues for learning the best course of action. Among sociologists, this reliance on social cues is often discussed in terms of "peer effects," which are in turn explained by a need for actors to "fit into" their social environment [@robalinoPeerEffectsAdolescent2018]. Here, individuals adopt new habits or beliefs not only because of exposure to novel ideas, but also because certain lines of action fit better in the social contexts they inhabit. Imagine Jane's school friends start taking an interest in heavy metal and going to concerts. It makes sense for her to start going to those concerts as well: it is a behavior that fits her social context and allows her to keep spending time with her friends. The view of social influence as a "problem of fit" [@fligsteinSocialSkillTheory2001] underlies some of our most sophisticated attempts to disentangle how behaviors and ideas spread through networks. Whether it be actor-centric models of behavior dynamics [@snijdersStochasticActororientedModels2017] or spin-glass models of belief spread [@galesicStatisticalPhysicsModels2019], actors are assumed to have a higher chance of adopting habits or beliefs if such change would bring greater synchronicity between them and the people around them. Social influence then can be conceptualized as a problem of coordination: we try to orient ourselves towards the lines of action we perceive as appropriate in our social contexts [@fligsteinSocialSkillTheory2001].

At the same time, we also pay attention to more global features of the structures in which we find ourselves when selecting a line of action. Suppose that Jane is part of a school where heavy metal is overall looked down upon. She can still decide to only pay attention to her friends' behavior and keep her newly acquired concert-going habits. But this might result in her friendship group becoming tightly knit but socially isolated; they would be known as the 'metalheads.' Perhaps instead she would try to balance these local and global forces by downplaying her love for loud music or complementing it with other practices such as going to pop concerts. In many cases, actors strike a balance between the relative influence of their immediate contexts with that of the wider structures in which they are embedded when finding adequate lines of action.

The need to reconcile global and local forces is a central component of widely accepted theories of social action [@abbottLinkedEcologiesStates2005; @martinWhatFieldTheory2003; @bourdieuLogicPractice1990]. Specific social settings reward certain behaviors and/or identities while discouraging others [@bourdieuLogicPractice1990]. A relentless drive to make profits might be celebrated in the corporate world, but it would seem distasteful and unacceptable if embodied by an avant-garde artist. By virtue of inhabiting these social spaces, we align ourselves to their expectations and regularities. Through our piece-meal interactions, we build a picture of the patterns of behavior that configure the settings we navigate. We infer global patterns by way of our necessarily local experiences.

It remains unclear, however, how individual experience, local influence, and global influence affect processes of cultural transmission in tandem. As previously mentioned, recent simulations have tended to focus on the effects of a single mechanism in shaping the emergence and spread of beliefs, habits, and connections between them. What is more, this work has shown an almost exclusive concern with local sources of influence, with agents learning information from their immediate neighbors in a network. These models seldom reflect the fact that agents seek information from different parts of the social structure, that they use different strategies to do so, and that they might give value to such information differently depending on the social phenomena at hand. Research on transmission and the emergence of polarized networks could improve, then, from models that simultaneously account for these strategies.

An important exception to the above critique appears in DellaPosta et al.'s [-@dellapostaWhyLiberalsDrink2015] work on cultural polarization. While DellaPosta et al.'s simulation primarily looks at the effects of homophily and peer influence on polarization, the authors eventually show that the inclusion of global "hubs" of information accelerates the spread of culture through networks. Their model aims to imitate a real-world scenario of political beliefs in which highly-influential "opinion leaders" are present, and is commendable in exploring what happens when actors place different weights on multiple sources of information. Still, hubs in this model serve to represent socially distant actors: they exert influence but are not themselves influenced by other nodes in the network. We argue that global influence also occurs in more local social settings where such hubs are absent. Adolescent networks such as the one Jane finds herself in are a fitting example of this. Among adolescents, it is not only the less popular kids who adapt their behavior according to what they observe in their more popular peers: the same popular peers also look to social social cues and change their behavior based on what others are doing (Milner 2004). Accordingly, we believe that models of cultural transmission should examine sources of global influence that are more closely embedded in social settings and use the same learning strategies as other nodes in a network.


### The use of different social learning strategies

In the foregoing sections, we have argued that recent models of transmission have been limited in depicting how agents acquire and process cultural information. Specifically, these models have largely featured agents using a single heuristic to process information, and more often than not this heuristic is tied to local rather than global sources of social influence. We contend that research on cultural transmission should account for the fact that humans use multiple heuristics simultaneously when acquiring new information, including strategies that correspond to global sources of network influence. This notion finds support in an established line of interdisciplinary research that examines the different strategies individuals use when foraging for information. By drawing from this line of research, which we will refer to as the "social learning" literature, scholars of cultural transmission can modify existing models to better resemble how humans gather information while still producing similar results.

An assumption of our argument to this point has been that agents are capable of inferring which nodes in a network are most central, and that agents are able to draw information from these central nodes. Research in the social learning literature provides much evidence for this claim. Across cultures, one of the most widely used social learning strategies among humans is to copy successful individuals [@jimenezPrestigebiasedSocialLearning2019]. Humans are highly sensitive to prestige cues, and experimental work has shown prestige-based social learning occurring as early as childhood [@chudekPrestigebiasedCulturalLearning2012]. Salient and successful individuals in a structure are visible to others, in part because they have many connections (their in-degree count is high). In addition, individuals are adept at inferring high status among members composing a social group. Shepherd [-@shepherdStructurePerceptionHow2017] notes that the amount of status inferred varies depending on the social positions that individuals occupy: nodes that are highly visible to a portion of the structure might be relatively obscure to others. Nonetheless, humans still look for prestige cues within the bounds of their perception. They are not merely passive receptacles of social influence but instead follow cues based on others' positions in a group that indicate where to look for useful information.

Inferring which individuals are "successful" and imitating them is a well-documented social learning strategy based on global properties of a given social group. However, as we have suggested, this is far from the only strategy that people use when foraging for information. Social learning scholars emphasize that humans have an array of heuristics for gathering and processing information at their disposal, and that the specific heuristics humans use varies between the situations in which they find themselves. Gathering information from "successful" individuals in a network proves an important strategy when tasks are complex or when environments are highly variable [@henrichNatureCulturalTransmission2011; @mcelreathExistenceAimingOutside2008; @henrichCulturalTransmissionDiffusion2001]. For example, in a seminal ethnographic study, Henrich et. al [-@henrichNatureCulturalTransmission20] show that – among a group of Fijian villagers – perceived success in spear fishing was the biggest predictor of whether respondents would seek a person for advice regarding that activity. However, when environments are relatively stable, merely looking at what the majority of individuals in a group are doing is an effective strategy [@richersonNotGenesAlone2008; @rendellWhyCopyOthers2010]. In an experimental study, Efferson et al. [-@effersonConformistsMavericksEmpirics2008] had respondents play a game where they selected among two 'technologies' with different payoffs. A subset of participants did not have information about their individual returns but rather they knew what their immediate group had chosen - e.g. if everyone chose technology 1. For the group with social information, conformity - copying the majority - proved to be a useful strategy in the long run. There are trade-offs, of course, between different strategies. Copying successful individuals can be effective, but identifying such individuals requires knowledge about the markers of prestige in a given context. Imitating the majority, although efficient, can be ineffective in highly variable environments. Accordingly, computational models and experimental data show that actors use different strategies depending on the task and setting at hand [@mcelreathExistenceAimingOutside2008; @barkocziSocialLearningStrategies2016]. The most successful strategies often blend multiple heuristics with some individual exploration [@mcelreathExistenceAimingOutside2008]. Given these findings, cultural transmission scholars ought to consider what happens when actors blend heuristics as they often do when processing information. As different tasks and settings prompt individuals to put different weights on sources of information, they are likely to change how cultural transmission unfolds at the network level.

The social learning literature tends to focus on agents' strategies given a specific task at hand, but here we explore how the use of different learning heuristics might affect patterns of cultural transmission. The questions raised in this line of work are usually centered around the strategies themselves. In the context of simulations, researchers ask: given a complex problem, what learning strategies *should* agents use? In experimental studies, they ask: given a specific task, what heuristics do individuals *actually* use? This approach has proven useful to show that it is not only beneficial - in theory - for agents to use a varied set of learning heuristics given a problem [@rendellWhyCopyOthers2010], but that people do use them when confronted with complex tasks [@mcelreathExistenceAimingOutside2008]. Here, we try to build on this work by asking the following question: given that agents use different social learning techniques, how do these individual-level learning habits affect group-level processes of diffusion? We examine the impact that using different learning strategies might have on how culture is transmitted throughout a network. Thus, we incorporate the idea that agents use different combinations of learning strategies when foraging for information and take that as our starting point. But we also analyze how this assumption scales up to aggregate processes of cultural transmission. We examine differences in trajectories of diffusion when agents tend to rely on certain strategies or when they place different weights on the information retrieved using different heuristics.

Further, we seek to infer these learning strategies from longitudinal network data. This is an important step insofar as it grounds work on social learning in the kind of relational data that sociologists are accustomed to. If one is convinced that individuals do use different learning strategies, it follows that we would be able to see traces of them in longitudinal data. In fact, recent work on strategies used by Go players [@beheimStrategicSocialLearning2014] and soccer managers  [@mesoudiCulturalEvolutionFootball2020] has begun to look for these patterns. However, these recent efforts - as well as the simulations and experiments mentioned above - tend to only minimally incorporate social structure. Therefore, there are important benefits in testing the ideas that have emerged from the social learning literature in longitudinal network data. This type of data provides the opportunity to look at the co-evolution of behaviors and ties; to explore who is learning what and from whom, across time. Moreover, by trying to infer learning heuristics from longitudinal network data, it is possible to bridge the insights from the social learning literature with sociological work on network influence. While - as we argue below - the latter has hinted at ideas that are substantively similar as those arrived at by social learning scholars, they seldom use the same theoretical concepts. Looking for different learning strategies in longitudinal network data, then, offers a valuable extension to existing work on social learning: it grounds the insights more concretely in social structures, it helps us trace the use of strategies over time, and it extends the theoretical purchase of these ideas to other ongoing agendas.

### Different strategies among network scholars

It is somewhat surprising that most recent work on the transmission of personal beliefs and practices has not looked more explicitly at the effects of different heuristics and strategies working simultaneously. In particular, this is because network scholars elsewhere have explored how different information processing mechanisms — including those concerned with both local and global sources of peer influence — shape how other diffusion processes unfold. These scholars have increasingly moved away from models that only consider immediate ties to more complex conceptualizations that specify varying sources of influence [@dimaggioNetworkEffectsSocial2012; @burtSocialContagionInnovation1987]. Edelmann [-@edelmannFormalizingSymbolicBoundaries2018], for instance, shows that agents respond differently to peer influence depending on how culturally proximate they consider their alters and how culturally appropriate they deem the behavior in question. Closer to our argument, recent work has shown that central nodes in a structure exercise considerable social influence across the network [@robalinoPeerEffectsAdolescent2018; @paluckSalienceSocialReferents2012]. These findings lend credence to the argument that popular and salient individuals are particularly influential; a view that has both been highlighted in scholarly work [@sherifReferenceGroupsExploration1964] and has been the backbone of policy interventions [@campbellInformalSchoolbasedPeerled2008]. Peer effects then are not monolithic; rather, they have varying weights depending on where – and who – they come from.

Efforts to model multiple sources of social influence have been generative for scholars interested in how culture spreads. In the broader diffusion literature, the interplay between local and global patterns is often discussed in terms of "credibility" and "legitimacy" [@centolaComplexContagionsWeakness2007; @rossmanDiffusionLegitimateDiffusion2014]. "Credibility" here refers to the fact that agents might abstain from adopting an innovation until they see enough of their peers embracing it. "Legitimacy," in turn, reflects that behaviors that break expectations – e.g. a radical innovation or the disadoption of a widely accepted behavior – will be met with resistance in cultural transmission. Though implicitly, these concepts highlight the fact that, when deciding whether to adopt a behavior, agents take into account what their peers are doing but also try to infer more general patterns in the population. Agents aim to infer what the information to which they have access tells them about the general acceptance of a cultural trend in the overall population. To assess the credibility or the legitimacy of an innovation is partly about figuring out how the local patterns we observe fit into the wider global dynamics.

Diffusion scholars have recognized the tendency for people to use multiple heuristics or practices when acquiring and processing information, and that tensions may arise when people use heuristics and practices in combination. We argue that these tensions are valuable for models of cultural transmission that more recent work has offered and should be accounted for in this area of research. Recent work on cultural transmission has distinguished itself from broader work on diffusion with its focus on more personal and less material forms of culture. This focus has shown greater interest in - and awareness of - the cognitive bases of culture, with implications for understanding how culture moves between individuals and gives rise to group-level consensus or polarization. Accordingly, recent models of cultural transmission have operationalized the cultural items that move through networks in ways that differ from other work on diffusion. While the broader diffusion literature suggests that the interplay between different strategies and heuristics shapes the spread of personal culture, its treatment of what culture is differs enough from recent work to warrant further investigation. Consequently, we believe that newer models of cultural transmission should strive to adapt ideas explored in other research on diffusion to see how these ideas apply to beliefs, practices, and other forms of personal culture.

We also contend that this cross-pollination bears promise for network scholars. Some of the structural dynamics of social influence that this line of work outlines resonate with wider work on social learning. The influence of central nodes, for instance, can be mapped to prestige-biased social learning, while the influence of structurally equivalent alters [@burtSocialContagionInnovation1987] resembles the heuristic of copying those who are similar to us [@barkocziSocialLearningStrategies2016]. Work on diffusion takes for granted agents' social learning expertise: agents *know* who is central in a network and/or who occupies a similar position to them. What the social learning literature offers is an solid empirical basis for these assumptions. Thus, by examining different sources of social influence, through the lens of social learning, we can ground them in a wider research program that offers empirical evidence about the cognitive and cultural bases of the strategies we use to learn from one another. 

In sum, network researchers have built increasingly complex models of social influence that account for individuals using multiple learning heuristics simultaneously. Outside of sociology, scholars interested in social learning provide evidence for the cognitive bases of these learning heuristics. Nonetheless, recent models of cultural transmission lag behind. These models seldom reflect the fact that agents seek information from different parts of the social structure, that they use different strategies to do so, and that they might give value to such information differently depending on the social phenomena at hand. It remains unclear then how the use of varying strategies of social learning affects processes of transmission for more personal forms of culture. To their credit, scholars of cultural transmission have found that even slight changes in the information that agents take into account give way to contrasting group-level outcomes, from total consensus to fractured polarization. The question, then, is whether foraging for information from different sources, even when no biases are present, would also lead to varying patterns in the diffusion of personal culture. This question brings us to the present study. To answer it, we need two things: first, statistical methods that can help us disentangle the importance of different sources of information for a given social phenomenon; second, ways of formalizing how agents use and give weight to different social learning strategies.


### Measuring and formalizing learning strategies 

To measure the differential impact of different sources of influence, we can draw ideas from research on social learning, specifically on the cultural evolution of strategies in games. When a soccer manager is deciding what formation to play, they need to consider many factors: their own track-record with a strategy, how that formation has fared in the league as a whole, and the kind of strategy their rivals are likely to use [@mesoudiCulturalEvolutionFootball2020]. Recent work explores how these global and local sources of information help us predict the popularity and evolution of certain strategies across time [@mesoudiCulturalEvolutionFootball2020; @beheimStrategicSocialLearning2014]. Researchers have also designed games to conduct experimental work on broader social learning patterns [@deffnerDynamicSocialLearning2020]. Though their statistical models vary in complexity, these studies tend to use repeated measures at the individual level to fit multilevel models that examine how informative personal record and social cues are when predicting what players do next. Our argument is that we can adapt the techniques that these studies use in order to infer the informativeness of different sources of social influence in longitudinal network data.

In order to provide a formal model that specifies the importance of varying sources of influence, we can use as a starting point Friedkin and Johnsen’s [-@friedkinSocialPositionsInfluence1997] classic formulation of social influence. Formalization in this case is useful because it specifies exactly how new ideas of social influence expand upon previous work, and - importantly - the assumptions we have to make in the process. Burt's [-@burtSocialContagionInnovation1987] work remains a paradigmatic example of the usefulness of formalizing different processes of social influence. His formalization of influence through structural equivalence closely  parallels contemporary work on social learning, which shows that agents with domain expertise tend to learn from those who seem similar [@barkocziSocialLearningStrategies2016]. In the same vein, it is useful to think how prestige-biased social learning could be incorporated into standard formal models of social influence. Friedkin and Johnsen’s [-@friedkinSocialPositionsInfluence1997] definition is as follows:

$$Y^{(t)} = \alpha WY^{(t-1)} + (1-\alpha)Y^{(1)}$$ 

Here, $Y^{(t)}$ is a vector of length $n \times 1$ that represents the agents’ opinions or behaviors at time $t$. On the right-hand side of the equation, we notice two terms that could be roughly described as the social influence component and the personal track-record respectively. Let’s start with the latter: $Y^{(1)}$ is a vector of length $n \times 1$ that reflects the individuals’ starting opinions, and how these might be affected by exogenous variables. The first component contains $W$, which is an $n \times n$ matrix that represents the interpersonal influences that exist in given structure. Thus, when multiplied with the individuals’ opinions at time $t-1$, which is what $Y^{(t-1)}$ captures, this term represents the peer effects on opinion. The parameter $\alpha$ just controls how much weight individuals give to social cues relative to their starting opinions.

We can re-write this equation to specify varying sources of influence. Let $V$ be an $n \times n$ matrix that indexes who the most popular nodes in a network are. We need a cutoff to determine what nodes fall within this group, and we specify how we operationalize this notion of popularity below. For now, it would be useful to provide a concrete example. Imagine we  have a network consisting of six nodes, and we have determined that nodes three and four are considered the most popular. The matrix $V$ would look like this:

$$
V_{6,6} =
\begin{pmatrix}
0 & 0 & 0.5 & 0.5 & 0 & 0 \\
0 & 0 & 0.5 & 0.5 & 0 & 0 \\
0 & 0 & 0.5 & 0.5 & 0 & 0 \\
0 & 0 & 0.5 & 0.5 & 0 & 0 \\
0 & 0 & 0.5 & 0.5 & 0 & 0 \\
0 & 0 & 0.5 & 0.5 & 0 & 0 \\
\end{pmatrix}
$$ 

In the Friedkin and Johnsen [-@friedkinSocialPositionsInfluence1997] model, the rows of the matrices must sum to one. Here, we have two popular nodes so they split the weight their actions or beliefs have. We can think about this as the visibility matrix: it simply stores information about the nodes whose opinions or behaviors agents consider when using prestige-biased social learning.

Now, let $\lambda$ be a parameter – similar to $\alpha$ – that specifies how much weight is given to the opinions of one’s peers versus those of the most popular nodes – i.e. local vs. global influence.

The equation would look like this:

$$ Y^{(t)} = \alpha Y^{(t-1)}[\lambda (W) + (1-\lambda)V] + (1-\alpha)Y^{(1)}$$
Though this equation might seem considerably longer than the original, the changes are
minimal. The term $\lambda$ tells us whether agents give more importance to the views of their peers or to those of popular nodes, and the matrix $V$ signals who the latter are. We can think of this specification as a more general form of the Friedkin and Johnsen [-@friedkinSocialPositionsInfluence1997] model. If we set $\lambda$ to 1, then we get their seminal equation. The result then is a model of social influence that takes into account that individuals look at different places of the social structure when learning from one another.

In the analyses below, we show that considering these varying sources of influence is important to understand processes of cultural transmission. First, we note that local and global dynamics might be differentially informative across behaviors, suggesting that we should indeed disentangle the relative weight of different sources of influence. Second, we build an agent-based simulation based on our revised model of social influence, showing that trajectories of diffusion vary depending on the learning strategies that individuals use.

## Global and local influence in longitudinal network data 

What we need is an empirical strategy to adjudicate the importance of different sources of social influence for a given social phenomenon. Consider a behavior of interest like drinking alcohol. The question we would like to answer is whether to predict agent j’s drinking habits at time t + 1, we should look at the behavior of their immediate ties or at the actions of the most popular nodes of the network at time t. Using longitudinal network data, we can generate predictions using only within-person variation in global and local influence [@beheimStrategicSocialLearning2014]. Thus, this approach is useful to disentangle how informative local and global dynamics are for explaining the spread and development of a phenomena of interest – like drinking – in networks across time. In the following analysis, we fit multilevel models to longitudinal network data to show how the informativeness of different sources of influence varies across social phenomena.

Here, we use the longitudinal data-set of adolescent behaviors and opinions collected by Knecht et al. [-@knechtNetworkActorAttributes2012]. The data-set was collected over four waves in the space of three months between 2003 and 2004. In total, 2996 students – belonging to 14 schools in the Netherlands – were surveyed. 1509 students participated in all four waves and we focus on their responses for the following analysis.

We focus on three independent variables: drinking, smoking, and whether the respondents have used public transportation without paying the fare. We choose to examine different variables because our central goal is to analyze whether global and local measures are differentially informative across social phenomena. The questions for these items were the same: they asked the respondents about their engagement with these behaviors in the last three months. The possible responses were ordinal with five categories: “never,” “one time,” “two to four times,” “five to ten times,” and “more than ten times.” For the purposes of this analysis, we dichotomize the responses so that if a participant answers “never” they get a value of 0 or a value of 1 otherwise. We do this so that the connections between this empirical analysis and the agent-based simulation presented below are clearer.

The explanatory variables are two measures we construct to represent the local and global prevalence of the behavior in question. The local score is the average behavior among ego’s friends. Thus, if ego has five nominated friends and two of them drink, then ego’s local score at that wave would be $\frac{2}{5}$. Local score, then, varies across respondents, reflecting differences in their immediate friendship networks. The global score, in turn, is the same for all individuals embedded in the same structure at a given wave. We calculate it by looking at the average behavior of the most popular nodes at a given time. To operationalize this idea of popularity, we look at eigen-vector centrality. We consider the nodes to be among the most popular if they have an eigen-vector centrality score above the 85th percentile.^[There are different ways of operationalizing popularity; cf. [@robalinoPeerEffectsAdolescent2018]]. Here, we decide
to use a threshold that indexes a group of high-status, popular nodes.^[We conducted the same analyses using the 80th and 90th percentile as cutoffs and got largely consistent results] This captures how social learning scholars have discussed and formalized prestige-biased social learning [@jimenezPrestigebiasedSocialLearning2019]. We want to reflect the idea that, when using this social learning strategy, agents look at a few individuals who they consider to be successful. Therefore, having a threshold that helps us distinguish between this group and the rest of the nodes is appropriate. Say then that, in a given school, there are six nodes whose eigen-vector centrality is above that threshold, and one of them drinks. The global score for all nodes in that network in that wave would be $\frac{1}{6}$. Though these constructed variables are necessarily rough approximations, we consider that these scores can help us disentangle the importance of global and local sources of influence for different behaviors.

Our main goal in these analyses is to examine whether these two variables – local and global scores – are differentially informative for the behaviors under examination. To address this issue, we fit  multilevel logit models where we allow the intercept and the effect of time to vary by individual. We use weakly regularizing priors that do not reflect any assumptions about the phenomena in question but rather center the estimates towards a sensible space. The prior for the effects of the global and local scores and the effect of time are narrow because overly flat priors in logit models often translate into assuming that the ends of the probability scale - either 0 or 1 - are disproportionately likely. The models we fit here have the following functional form:

$$ Y_i \sim Binomial(1, p_i)$$
$$ logit(p_i) = \alpha_{[id][i]} + \beta_{local[i]} \times local + \beta_{global[i]} \times global + \gamma_{wave[id][i]} \times wave$$
$$ (\beta_{global}, \beta_{local}, \gamma_{wave}) \sim Normal(0, 1.5)$$
$$ \alpha \sim Student-t(3, 0, 2.5)$$
$$ \sigma \sim Student-t(3, 0, 2.5)$$
$$R \sim LKJcorr(1)$$

Any examination about peer effects has to deal with the potential confounds of selection and influence [@steglichDynamicNetworksBehavior2010]. The central danger is to think that individuals are becoming like their peers when really they are just choosing to interact with like-minded individuals in the first place. Here, longitudinal data can help us address that concern. This type of data provides repeated measures for each individual, which allows us to cluster estimates at the level of the respondent. This means we can use within-person variation to generate our predictions, each individual acting effectively as their own control group. The models above let us adjudicate whether changes in local and global scores, at the individual level, lead to differences in the likelihood of adopting a behavior of interest. Nonetheless, our main goal here is not to provide a rigorous causal account; Robalino and Macy [-@robalinoPeerEffectsAdolescent2018] have accomplished that well. Instead, we want to highlight two ideas: first, that we can disentangle the effects of central nodes and local ties; second, that the informativeness of these measures might vary for different social phenomena.

```{r, fig.height = 8, fig.width = 7}

### Alcohol ####
alc_model <- read_rds("Analyses/alcohol_model.rds")

ss <- posterior_samples(alc_model) %>% 
  select(b_friends_z, b_popular_z)

ss_long <- ss %>% 
  pivot_longer(1:2, values_to = "coefficient", names_to = "type") %>% 
  mutate(coef = if_else(type == "b_friends_z", "friends", "popular"), 
         coef = as.factor(coef))

p_alc <- ss_long %>% 
  ggplot(aes(x = coefficient, fill = coef)) +
  geom_density(alpha = 0.5) + 
  labs(x = "", 
       title = "Coefficients in log-odds", 
       subtitle = "Alcohol") + 
  theme(legend.position = "top") +
  theme(legend.title = element_blank())

alc_diff <- ss %>% 
  mutate(difference = b_friends_z-b_popular_z) %>% 
  ggplot(aes(x = difference)) +
  geom_density(fill = "gray80", 
               alpha = 0.5) +
  labs(x = "", 
       y = "", 
       title = "Difference")


### Smoking ####
smok_model <- read_rds("Analyses/smoke_model.rds")

ss <- posterior_samples(smok_model) %>% 
  select(b_friends_z, b_popular_z)

ss_long <- ss %>% 
  pivot_longer(1:2, values_to = "coefficient", names_to = "type") %>% 
  mutate(coef = if_else(type == "b_friends_z", "friends", "popular"), 
         coef = as.factor(coef))

p_smok <- ss_long %>% 
  ggplot(aes(x = coefficient, fill = coef)) +
  geom_density(alpha = 0.5) + 
  labs(x = "", 
       title = "", 
       subtitle = "Smoking") + 
  theme(legend.position = "top") +
  theme(legend.title = element_blank())

smok_diff <- ss %>% 
  mutate(difference = b_friends_z-b_popular_z) %>% 
  ggplot(aes(x = difference)) +
  geom_density(fill = "gray80", 
               alpha = 0.5) +
  labs(x = "", 
       y = "", 
       title = "")

### Traffic ####
fare_model <- read_rds("Analyses/fare_model.rds")

ss <- posterior_samples(fare_model) %>% 
  select(b_friends_z, b_popular_z)

ss_long <- ss %>% 
  pivot_longer(1:2, values_to = "coefficient", names_to = "type") %>% 
  mutate(coef = if_else(type == "b_friends_z", "friends", "popular"), 
         coef = as.factor(coef))

p_fare <- ss_long %>% 
  ggplot(aes(x = coefficient, fill = coef)) +
  geom_density(alpha = 0.5) + 
  labs(x = "", 
       title = "", 
       subtitle = "Traffic Fare") +
  theme(legend.position = "none") +
  theme(legend.title = element_blank())

fare_diff <- ss %>% 
  mutate(difference = b_friends_z-b_popular_z) %>% 
  ggplot(aes(x = difference)) +
  geom_density(fill = "gray80", 
               alpha = 0.5) +
  labs(x = "", 
       y = "", 
       title = "")

patched <- (p_alc | alc_diff) / (p_smok | smok_diff) /(p_fare | fare_diff) 

patched

```

Figure 1 shows the marginal posterior distributions for the coefficients for local and global scores for the three models, as well as the difference between the former and the latter. We can read these plots as the predicted increase in the log-odds of incurring in the behavior at hand given a one standard deviation increase in either global or local score. At first glance, we notice that the relative weight of these coefficients is consistently high; an increase in either global or local scores would result in considerably higher log-odds of engaging in the behavior in question. Nonetheless, we also notice subtle differences between local and global dynamics in the models. For smoking, the behaviors of the immediate ties and those of the central nodes are almost equally as informative for ego’s behavior in following waves. When it comes to not paying a public transportation fare, however, the distributions of the difference between both coefficients is mostly negative. This implies that increases in the global score would have a bigger effect on the probability of engaging in these behaviors than increases in the local counterpart. We notice the opposite dynamic when we consider drinking: variation in local measures is more informative of one’s drinking habits than the actions of the popular nodes.

We need to be careful when interpreting these coefficients. The coefficients of logit models are notoriously difficult to understand when examined separately. This is because the absolute probability of the outcome depends on all the moving parts of the model, not just the marginal distribution of a single coefficient estimate. Moreover, differences that might seem considerable between high values in the log-odds scale are smaller when transposed to the probability scale. For this reason, it is key to look at the predicted probabilities of engaging in the behaviors in question. Here, we present predicted probabilities for the three models . 

```{r}
theme_set(theme_classic())
set.seed(33)
#### Alcohol ####
alcohol_model <- readRDS('Analyses/alcohol_model.rds')
# Import the data 
df_wide <- read_csv('Data/alcohol_wide.csv')
# Turn into a long panel dataset 
df_long <- long_panel(df_wide, 
                      id = "id", 
                      prefix = "_w", 
                      begin = 1, 
                      end = 4, 
                      label_location = "end")

# Rename, change, and clean 
dfl <- df_long %>% 
  mutate_at(.vars = c("friends", 
                      "popular", 
                      "actalcoh"), 
            as.numeric) %>% 
  filter(!is.na(friends) & 
           !is.nan(friends) & 
           !is.na(popular) & 
           !is.nan(popular)) 

dfl_scaled <- dfl
dfl_scaled$friends_z <- (dfl_scaled$friends-mean(dfl_scaled$friends)/sd(dfl_scaled$friends))
dfl_scaled$popular_z <- (dfl_scaled$popular-mean(dfl_scaled$popular)/sd(dfl_scaled$popular))  

dfl_scaled <- dfl_scaled %>% 
  panel_data(., id = id, wave = wave)

median_popular <- median(dfl_scaled$popular_z)
median_friend <- median(dfl_scaled$friends_z)
one_sd_popular <- median_popular+sd(dfl_scaled$popular)
one_sd_friend<- median_friend+sd(dfl_scaled$friends_z)


person <- sample(dfl_scaled$id, 50)
newdata <- data.frame(id = rep(person, 2), 
                      friends_z = rep(c(median_friend, one_sd_friend), each = 50), 
                      popular_z = rep(c(one_sd_popular, median_popular), each = 50), 
                      wave = rep(2, 100),
                      type = rep(c("global score", "local score"), each = 50)) 

preds <- predict(alcohol_model, 
                 newdata = newdata)

newdata$predicted_probs <- preds[,1]

alc <- newdata %>% 
  ggplot(aes(x = type, 
             y = predicted_probs, 
             group = id)) +
  geom_line(alpha = 0.7) + 
  labs(title = "Alcohol", 
       y = "Predicted probability", 
       x = "")

#### Running red light ####

dfl_scaled <- read_csv('Data/fare_std.csv')
bike_model <- readRDS('Analyses/fare_model.rds')

median_popular <- median(dfl_scaled$popular_z)
median_friend <- median(dfl_scaled$friends_z)
one_sd_popular <- median_popular+sd(dfl_scaled$popular)
one_sd_friend<- median_friend+sd(dfl_scaled$friends_z)


person <- sample(dfl_scaled$id, 50)
newdata <- data.frame(id = rep(person, 2), 
                      friends_z = rep(c(median_friend, one_sd_friend), each = 50), 
                      popular_z = rep(c(one_sd_popular, median_popular), each = 50), 
                      wave = rep(2, 100),
                      type = rep(c("global score", "local score"), each = 50)) 

preds <- predict(bike_model, 
                 newdata = newdata)

newdata$predicted_probs <- preds[,1]

bike <- newdata %>% 
  ggplot(aes(x = type, 
             y = predicted_probs, 
             group = id)) +
  geom_line(alpha = 0.7) + 
  labs(title = "Skipping fare", 
       y = "Predicted probability", 
       x = "", 
       caption = "Figure 2")

#### Alcohol ####
smoke_model <- readRDS('Analyses/smoke_model.rds')
# Import the data 
df_wide <- read_csv('Data/smoke_wide.csv')
# Turn into a long panel dataset 
df_long <- long_panel(df_wide, 
                      id = "id", 
                      prefix = "_w", 
                      begin = 1, 
                      end = 4, 
                      label_location = "end")

# Rename, change, and clean 
dfl <- df_long %>% 
  mutate_at(.vars = c("friends", 
                      "popular", 
                      "actsmok"), 
            as.numeric) %>% 
  filter(!is.na(friends) & 
           !is.nan(friends) & 
           !is.na(popular) & 
           !is.nan(popular)) 

dfl_scaled <- dfl
dfl_scaled$friends_z <- (dfl_scaled$friends-mean(dfl_scaled$friends)/sd(dfl_scaled$friends))
dfl_scaled$popular_z <- (dfl_scaled$popular-mean(dfl_scaled$popular)/sd(dfl_scaled$popular))  

dfl_scaled <- dfl_scaled %>% 
  panel_data(., id = id, wave = wave)

median_popular <- median(dfl_scaled$popular_z)
median_friend <- median(dfl_scaled$friends_z)
one_sd_popular <- median_popular+sd(dfl_scaled$popular)
one_sd_friend<- median_friend+sd(dfl_scaled$friends_z)


person <- sample(dfl_scaled$id, 50)
newdata <- data.frame(id = rep(person, 2), 
                      friends_z = rep(c(median_friend, one_sd_friend), each = 50), 
                      popular_z = rep(c(one_sd_popular, median_popular), each = 50), 
                      wave = rep(2, 100),
                      type = rep(c("global score", "local score"), each = 50)) 

preds <- predict(smoke_model, 
                 newdata = newdata)

newdata$predicted_probs <- preds[,1]

smoke <- newdata %>% 
  ggplot(aes(x = type, 
             y = predicted_probs, 
             group = id)) +
  geom_line(alpha = 0.7) + 
  labs(title = "Smoking", 
       y = "Predicted probability", 
       x = "Type of increase")


(alc | smoke |bike)
```

Figure 2 shows two predicted probabilities for each model. We randomly sample 50 agents and predict their probability of engaging in the behavior at hand at different values of the main independent variables. The leftmost point of each plot represents the predicted probability of engaging in the behavior when we add a one standard deviation increase to the global score while keeping local score at its median value. The rightmost point shows the opposite: an increase in local score while holding global score constant. We notice that, in the model that predicts alcohol consumption, there is a clear concentration among lower probabilities; most respondents have a low probability of drinking. However, in many cases, an increase in local score results in a slightly higher probability of engaging in the behavior than a comparable increase in global score. For using public transportation without paying, the pattern is reversed. There is a concentration at high probabilities, indicating that most agents have recently have skipped such fee. The predicted probabilities are slightly higher after a one standard deviation increase in the global score. This means that a rise in global score is more likely to lead to higher predicted probability of engaging in the behavior.

Overall, the stories that the models tell are relatively consistent: the habits of friends and of popular nodes are informative for understanding an agent’s probability of adopting the behavior. Increases in both global and local scores lead to a heightened predicted probability of engaging in all three behaviors. To an extent, this consistency is reassuring. The behaviors at hand are all similar insofar as they are ‘deviant’ behaviors that require some risk-taking. Overwhelmingly different results would be concerning. Nonetheless, we do notice slight but considerable differences in how important each source of influence is for predicting the agents’ behaviors in the next wave.

These results are meant to be illustrative. We do not claim to speak about the substantive issues of adolescent drinking or deviant behavior in general. Instead, we merely want to illustrate that the importance of different types of social influence might vary across phenomena. Even for behaviors that are relatively similar, we notice differences in how informative global and local sources of influence are for predicting ego’s behavior. An important question that emerges from this insight is whether the weight that is ascribed to global or local sources of information affects processes of cultural transmission. In the next section, we build an agent-based simulation to examine this question.

## Transmission and different social learning strategies

In this simulation, we situate a hundred agents in a network and let them learn from one another, placing different weights on varying sources of information. The agents are embedded in a randomly generated small-world network, which we hold constant across the simulations. Figure 3 shows this network.

```{r}
set.seed(33)
# Produce initial network visualization
# Create small world network 
network <- sample_smallworld(dim = 1, size = 100, nei = 4, p = 0.1, 10, loops = F)

graph <- as_tbl_graph(network) %>% 
  mutate(Popularity = centrality_degree(mode = 'in'))

ggraph(graph, 
       layout = "graphopt") + 
  geom_edge_fan(aes(alpha = stat(index)), show.legend = FALSE) + 
  geom_node_point(aes(size = Popularity),color = "steelblue", show.legend = F) + 
  #labs(title = "Figure 3") +
  theme_graph() 
```

The thing that is being transmitted here is a dichotomous behavior - like drinking - and, thus, at any point the agents can occupy one of two states, either 0 or 1. At the beginning of the simulation, each node has a starting probability $p$ of having the behavior $(B=1)$. Each turn, every agent looks around and observes three pieces of information: their own record of behavior, the average of their immediate ties (local average), and the average of the most central nodes of the network (global average). Then, it updates its current state by conducting a Bernoulli trial with probability $\pi$ so that:

$$ Pr(B=1) = \pi $$
$$ Pr(B=0) = 1 - \pi$$

$\pi$ is determined by the different sources of information from where agents can learn, and it can be defined by adapting the modified model of social influence defined above. We just need to alter the model so that it considers influence from the perspective of each agent. For an agent $i$, the equation that defines $\pi$ is:

$$ \pi_i = \alpha[ \lambda (local_{it}) + (1 - \lambda) global_t] = (1 - \alpha) personal_{itb}$$

Let us explain where these terms come from. Recall that, in the formulation above, $W$ is the matrix of interconnections for a given network. Here, we represent the local score as the average state of the nodes to which agent $i$ is immediately connected at time $t$. Thus, if agent $i$ is connected to $k$ nodes, its local score would be the average of a vector of that respective length - $\sum_k w_{ik}$. Conversely, global score represents the same procedure but for $V$, the visibility matrix. Thus, if there are $k$ popular nodes in the network, the global score is defined by $\sum_k v_k$. Last, we need a term that reflects the agent’s track-record with the behavior at time $t$. This is the $termpersonal_{itb}$, which is akin to $Y^{(1)}$ and $Y^{(t-1)}$ in the original formulation, capturing the habits and idiosyncrasies of the agents. When $\alpha = 1$ agents place no weight on their personal preferences, and their likelihood to adopt or disadopt the behavior is wholly dictated by social information. When $\lambda = 1$, in turn, actors consider only information from their direct ties, ignoring what the most central nodes of the network are doing.

The personal preference for the behavior $(B=1)$ at any given time $t$ is calculated using a softmax choice rule that takes into account the number of times an actor has been in state $B=1$ across the total number of turns:

$$ personal_{itb} = \frac{exp(successes_{it})}{sum_n exp(trials_{nit})} $$

The model is relatively simple. Each turn, every agent looks at their immediate ties and computes the average. They do the same for the most central nodes in the network. Then, they consider their own track record and adjust their preferences accordingly. The global parameters $\alpha$ and $\lambda$ determine how much weight is given to each piece of information.

Figures 4 and 5 display the results for simulations that explore the parameter space. We run the model for each combination of $\alpha$ and $\lambda$ between 0 and 1, moving in increments of 0.1. For each parameter pair, we run the simulation 25 times, each consisting of a hundred turns. We run these simulations with starting probabilities $p= (0.25,0.5,0.75)$, which represent the three panels on each of the figures. In the y axis, we find $\lambda$, the weight of local influence. The x axis, in turn, represents $\alpha$: how much attention agents pay to social information versus their own preferences or habits. The lower left corner of the heatmaps, then, represents agents who only learn from individual experience. In the upper right corner, in turn, we find agents who place a lot of weight on social cues and who only extract these from their immediate neighbors.

Figure 4 shows the median proportion of agents who had adopted the behavior at the end of each run. We see interesting and expected patterns. The most apparent observation is that processes of transmission are affected by the sources of information to which individuals pay attention. When there is no social influence, predictably there is not much transmission. As $\alpha$ increases, however, we notice that there is tendency for the whole network to adopt the same state, either $B=0$ or $B=1$. However, at medium values of $\alpha$, the median proportion at the end of each run is not 0 or 1, indicating the presence of subgroups.

```{r}
#### Prob = 0.25 ####
list_025 <- read_rds("Data/list_025.rds")
vector_si <- rep(seq(0, 1, by = 0.1), 11)
vector_g <- rep(seq(0, 1, by = 0.1), each = 11)

medians_025 <- c()
conv_025 <- c()

for (i in 1:121) {
    last_turns <- map_dbl(.x = c(1:25), ~ list_025[[i]][[.x]][[100]])
    m <- median(last_turns)
    medians_025[i] <- m
}

for (i in 1:121) {
  last_turns <- map_dbl(.x = c(1:25), ~ list_025[[i]][[.x]][[100]])
  convergence <- n_distinct(which(last_turns==1 | last_turns==0))
  conv_025[i] <- convergence/25
} 


df_025 <- tibble(soc_inf = vector_si, 
                 imp_friends = vector_g, 
                 median = medians_025,
                 convergence = conv_025,
                 init = 0.25)
#### Prob 0.5 ####
list_05 <- read_rds("Data/list_05.rds")
vector_si <- rep(seq(0, 1, by = 0.1), 11)
vector_g <- rep(seq(0, 1, by = 0.1), each = 11)

medians_05 <- c()
conv_05 <- c()

for (i in 1:121) {
  last_turns <- map_dbl(.x = c(1:25), ~ list_05[[i]][[.x]][[100]])
  m <- median(last_turns)
  medians_05[i] <- m
}

for (i in 1:121) {
  last_turns <- map_dbl(.x = c(1:25), ~ list_05[[i]][[.x]][[100]])
  convergence <- n_distinct(which(last_turns==1 | last_turns==0))
  conv_05[i] <- convergence/25
} 


df_05 <- tibble(soc_inf = vector_si, 
                 imp_friends = vector_g, 
                 median = medians_05,
                 convergence = conv_05,
                 init = 0.5)

#### Prob = 0.75 ####
list_075 <- read_rds("Data/list_075.rds")
vector_si <- rep(seq(0, 1, by = 0.1), 11)
vector_g <- rep(seq(0, 1, by = 0.1), each = 11)

medians_075 <- c()
conv_075 <- c()

for (i in 1:121) {
  last_turns <- map_dbl(.x = c(1:25), ~ list_075[[i]][[.x]][[100]])
  m <- median(last_turns)
  medians_075[i] <- m
}

for (i in 1:121) {
  last_turns <- map_dbl(.x = c(1:25), ~ list_075[[i]][[.x]][[100]])
  convergence <- n_distinct(which(last_turns==1 | last_turns==0))
  conv_075[i] <- convergence/25
} 


df_075 <- tibble(soc_inf = vector_si, 
                imp_friends = vector_g, 
                median = medians_075,
                convergence = conv_075,
                init = 0.75)

#### Join and Plot ####
df <- rbind(df_025, 
            df_05, 
            df_075)

(median_plot <- df %>% 
    ggplot(aes(x = soc_inf, y = imp_friends)) + 
    scale_fill_distiller(palette = "YlGnBu", direction = 1) +
    geom_tile(aes(fill=median)) + 
    theme_light() +
    labs(title = "Median Proportion at the end of each run", 
         fill = "", 
         x = "Weight of social cues", 
         y = "Weight of local influence", 
         caption = "Figure 4") + 
    scale_x_continuous(breaks = c(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1)) + 
    scale_y_continuous(breaks = c(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1))) + 
  theme(axis.text.x = element_text(angle = 90)) + 
  facet_wrap(~init)




(convergence_plot <- df %>% 
    ggplot(aes(x = soc_inf, y = imp_friends)) + 
    scale_fill_distiller(palette = "YlGnBu", direction = 1) +
    geom_tile(aes(fill=convergence)) + 
    theme_light() +
    labs(title = "Proportion of runs with total convergence", 
         fill = "", 
         x = "Weight of social cues", 
         y = "Weight of local influence", 
         caption = "Figure 5") + 
    scale_x_continuous(breaks = c(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1)) + 
    scale_y_continuous(breaks = c(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1))) + 
  theme(axis.text.x = element_text(angle = 90)) + 
  facet_wrap(~init)



```

Figure 5 displays the proportion of runs that ended in total convergence - i.e. all agents adopting the same state. We notice that it is not after $\alpha >0.4$, when social information starts playing a more considerable role, that we start seeing cases of total consensus. These patterns seem to be robust across different values of the initial probability $p$. We want to direct attention, nonetheless, to the upper right quadrant of the plots. Even when agents mostly place weight on social information, prioritizing local information can still lead to sub-groups even in fully connected networks. To use the example from above, this might be the case of Jane only paying attention to her close friends and embracing the “metalhead” label. Her friendship group becomes a cluster among the wider network of musical interests in her school.

```{r}
ew_runs <- tibble(
  turn = 1:100, 
  `11` = list_025[[61]][[11]], 
  `14` = list_025[[61]][[14]],
  `19` = list_025[[61]][[19]], 
  `24` = list_025[[61]][[24]]
) 

ew_runs_long <- ew_runs %>% 
  pivot_longer(2:5, names_to = "run", values_to = "proportion")

ew_runs_long %>% 
  ggplot(aes(turn, proportion)) +
  geom_line() + 
  facet_wrap(~run) + 
  labs(title = "Equal weight", 
       subtitle = "p = 0.25; alpha = 0.5; lambda = 0.5", 
       x = "Turn", 
       y = "% of Adopters", 
       caption = "Figure 6")

hsl_runs <- tibble(
  turn = 1:100, 
  `11` = list_025[[99]][[11]], 
  `14` = list_025[[99]][[14]],
  `19` = list_025[[99]][[19]], 
  `24` = list_025[[99]][[24]]
) 

hsl_runs_long <- hsl_runs %>% 
  pivot_longer(2:5, names_to = "run", values_to = "proportion")

hsl_runs_long %>% 
  ggplot(aes(turn, proportion)) +
  geom_line() + 
  facet_wrap(~run) + 
  labs(title = "High social and local influence", 
       subtitle = "p = 0.25; alpha = 1; lambda = 0.8", 
       x = "Turn", 
       y = "% of Adopters", 
       caption = "Figure 7")

```

Figures 6 and 7 show the trajectories of specific runs for different parameter combinations. Figure 6 shows simulations where social influence is given equal weight to individual experience, and local and global averages are also equally influential. The patterns mostly denote fluctuations but no strong tendencies and no total convergence. Figure 7, in turn, depicts four runs where agents only give weight to social cues and where they strongly prefer local information. Here, we notice much clearer tendencies towards total convergence. However, the push and pull between different sources of influence can still create fault-lines and sub-groups, as we see in run 24. Using different social learning strategies, then, considerably shapes how behaviors and ideas spread across networks. The interplay between local and global dynamics, as well as individual habits, leads to different trajectories of diffusion, ranging from total convergence to the emergence of distinct camps.

## Discussion 

In this study, we emphasize that individuals are sophisticated social learners and that, for that reason, influence can come from different sources. This is not a novel idea; it is prevalent in the literature about social influence [@paluckSalienceSocialReferents2012], cultural evolution [@mcelreathExistenceAimingOutside2008], and has even been the backbone of policy interventions [@campbellInformalSchoolbasedPeerled2008]. Agents do not passively absorb the influence of their immediate ties but actively use learning heuristics, like following prestige-cues, to copy the successful. Our models of cultural transmission, nonetheless, do not tend to incorporate these varying learning heuristics or to explore how the weight we place on these sources of information affects how behaviors and ideas spread across networks. We contend that there are two main ways in which we can begin to tackle this issue: first, we can incorporate statistical techniques that are capable of adjudicating the importance of different sources of information in longitudinal network data; second, we can outline formal models that reflect that individuals look at different parts of the social structure when foraging for information.

Using longitudinal network data on adolescent behavior, we fit Bayesian multilevel models where the main predictor variables are the behaviors of ego’s immediate ties and the habits of the most popular nodes in the network. We use individual-level variation in these dependent variables to predict the agent’s probability of drinking, of smoking, and of skipping a public transportation fee. The models show that increases in global and local scores lead to considerably higher probability of adopting the behaviors in subsequent waves. However, we notice subtle differences between the relative weight of the coefficients across the independent variables. While the behavior of immediate ties carries more weight when it comes to drinking, the habits of popular nodes are slightly more influential for predicting whether agents have have skipped a public transportation fare. Thus, even among relatively similar behaviors, we are able to tease out subtle differences in the informativeness of different sources of social information.

These results are meant to show that we can benefit from statistical approaches that disentangle the different sources of social influence. The models here, however, are relatively simple so they should be only interpreted as illustrations of a broader idea. Currently, there is exciting work that tries to infer learning heuristics from decision data and that seeks to provide computational tools to detect and simulate processes of contagion underpinned by multiple social learning strategies. Scholars interested in cultural transmission need to dialogue more directly with this body of work. This paper contributes to this discussion by trying to infer social learning strategies from longitudinal network data that is common among social network analysts. In order to understand how culture flows throughout a network, we need to take into account who is learning from whom, and how. To this end, we need to incorporate approaches that help us tease out the importance of differences sources of information for a given social phenomenon. Here, we make a first attempt to disentangle the importance of those sources. 

Our simulations of cultural transmission should reflect that social learning is not monolithic. Here, we expand Friedkin and Johnsen’s classic formulation of social influence to incorporate the idea that individuals learn from their immediate ties but also, following prestige cues, look at the most central nodes of the networks where they are situated. This general formulation forms the skeleton of the agent-based simulation we construct. Each turn, agents pay attention to three sources of information: what their immediate ties are doing, what the most central nodes in the network are doing, and their own habits. Then they adjust their behavior with a probability $\pi$  that takes into account the weight placed on each source of information. This model then allows us to explore the implication of placing different weights on varying social learning strategies for cultural transmission.

Taking into account the weights placed on different sources of information is key because they shape trajectories of cultural transmission. The simulation results show that the importance that is given to social and individual information, as well as to local and global sources, shapes how and to what extent a behavior spreads across a network. When individuals pay little attention to social cues, there is predictably little transmission. As the weight of social cues increases, so does the reach of the behavior being transmitted. However, even when agents prioritize social cues, the places where they get these cues affect the processes of diffusion: a tendency to learn from popular nodes, for instance, tends to lead to quicker processes of transmission. How a behavior spreads across a network depends then, in part, on the learning techniques agents use to identify and imitate such action.

A key finding of this analysis is the interplay between different sources of social influence can lead to the emergence of sub-groups in fully connected networks. Goldberg and Stein [-@goldbergSocialContagionAssociative2018] contend that one of the shortcomings of the “contagion” models of diffusion is that they imply that ultimately a fully connected network will always reach a point of full convergence. Their agent-based simulations of associative diffusion seek to emend this limitation. Other simulation work shows that polarization can arise in contexts with no structural barriers if agents are biased toward particular kinds of information or if they preferentially choose to learn from certain types of actors [@deffuantMixingBeliefsInteracting2000]. Here, we show that we can also explain how distinct pockets of behavior emerge, even in fully connected structures, by looking at the different strategies that actors use to learn from one another and how much weight they place on the information acquired in these ways.

## Limitations

The empirical analysis has several shortcomings. First, it is only meant to be illustrative; to show that different social phenomena might imply different social learning techniques. However, it does not propose a concrete theoretical claim about what kind of social phenomena go with which learning heuristics. We regard this as one of the key questions in the study of cultural transmission. Second, the operationalization of global influence could be more refined. It is not only that we use a cutoff to define which agents are perceived as popular but rather that, as Shepherd points out, this cutoff might vary across individuals. The people we perceive as being popular also depend on the social positions we occupy. While empirical work suggests that assuming relative consensus about collective perceptions of prestige is warranted, further work should explore the perceptions of the most central nodes - the global sources of influence - vary across agents or subgroups. 

Our simulation also has important limitations. While recent work on cultural transmission considers the transmission of multiple cultural items - or the connections between them -, our simulation only has one practice. It is undeniable that culture is often "bundled" and what is interesting is the relationship between cultural items - i.e. political affiliation and music consumption - rather than the items themselves. Given that our focus was on the social learning strategies, we erred on the side of simplicity about the information that was being transmitted through the network. It would be interesting to see how different social learning strategies would affect the trajectories of multiple cultural elements and the relationships between them. Another related critique is that our agents do not have the information-processing algorithms that have been shown to be important for the transmission of culture. The agents do not learn preferentially from those who are similar to them and do not disregard information that runs contrary to their beliefs. These are biases that enjoy empirical support and which, as discussed above, affect how culture spreads to a network. A fruitful next step would be to create models that incorporate these biases as well as take seriously the importance of different social learning strategies. 

## Conclusion

To conclude, in this paper we have pursued a straightforward line of argument: that individuals use different learning strategies depending on the phenomenon at hand, and that these heuristics shape processes of cultural transmission. Even though multiple strands of literature converge in arguing that individuals look at different sources when foraging for useful information, models of cultural transmission do not tend to incorporate varying learning techniques. Here, we build an agent-based simulation that seeks to address this. In the first part of the analysis, we fit multi-level logit models on longitudinal network data. The results illustrate that, even for similar behaviors, there are subtle differences in how much weight individuals place on the habits of their immediate ties and on the behaviors of the most central nodes of their networks. This suggests that there might indeed be differences in the learning strategies agents use when faced with different phenomena and that, therefore, we should try to tease out these varying sources of social influence. Disentangling the weight placed on global and local dynamics is important because this interplay affects processes of cultural transmission. The agent-based simulation we present in the second part of the paper lends credence to this idea. Whether individuals learn from those around them or from the most central nodes of the network shapes how and to what extent behaviors spread. Importantly, we notice that when agents prioritize local information sub-groups emerge, even in the fully connected network. Trajectories of cultural diffusion then are partly shaped by the strategies individuals use to learn from one another. Therefore, to understand how culture is transmitted we need to take into account that individuals are sophisticated social learners, capable of mixing and matching heuristics when foraging for information.

## References: 
